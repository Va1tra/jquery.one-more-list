!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jQuery")):"function"==typeof define&&define.amd?define(["jQuery"],t):"object"==typeof exports?exports["jquery.one-more-list"]=t(require("jQuery")):e["jquery.one-more-list"]=t(e.jQuery)}(this,function(e){return function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="/js/",t(0)}([function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=o(1),l=n(s),a=o(2),u=n(a),f=o(3),h=n(f),p=o(4),_=n(p),d=function(){function e(t,o){i(this,e),this._config=Object.assign({direction:"topDown",storage:""},o),this._config.storage=e._createStorage(o.storage),this._container=t,this._gettingMore=!1,this._cache={scrollTop:t.scrollTop,scrollHeight:t.scrollHeight},this._init()}return c(e,[{key:"showMore",value:function(){var e=this;this._gettingMore||(this._showSpinner(),this._config.storage.prev().then(function(t){if("topDown"==e._config.direction)(0,l.default)(e._container).append(t);else if("bottomUp"==e._config.direction){var o=e._container.scrollHeight;(0,l.default)(e._container).prepend(t),e._container.scrollTop+=e._container.scrollHeight-o}e._hideSpinner()},function(){e._hideSpinner()}))}},{key:"removeItem",value:function(e){this._saveScrollPosition(),(0,l.default)(e).remove(),this._restoreScrollPosition()}},{key:"appendItem",value:function(e){this._saveScrollPosition(),"topDown"==this._config.direction?(0,l.default)(this._container).prepend(e):"bottomUp"==this._config.direction&&(0,l.default)(this._container).append(e),this._restoreScrollPosition("append")}},{key:"_showSpinner",value:function(){this._gettingMore=!0,this._container.classList.add("__fetching")}},{key:"_hideSpinner",value:function(){this._gettingMore=!1,this._container.classList.remove("__fetching")}},{key:"_saveScrollPosition",value:function(){this._cache.scrollTop=this._container.scrollTop,this._cache.scrollHeight=this._container.scrollHeight,this._cache.clientHeight=this._container.clientHeight}},{key:"_restoreScrollPosition",value:function(e){"topDown"==this._config.direction?"append"==e&&0!=this._cache.scrollTop&&(this._container.scrollTop=this._cache.scrollTop+(this._container.scrollHeight-this._cache.scrollHeight)):"bottomUp"==this._config.direction&&("append"==e?this._cache.clientHeight==this._cache.scrollHeight-this._cache.scrollTop&&(this._container.scrollTop=this._container.scrollHeight-this._container.clientHeight):this._container.scrollTop=this._cache.scrollTop+(this._container.scrollHeight-this._cache.scrollHeight))}},{key:"_init",value:function(){var e=this;(0,l.default)(this._container).on("scroll",u.default.debounce(function(t){"topDown"==e._config.direction?e._container.scrollHeight-e._container.clientHeight-e._container.scrollTop<Math.max(Math.min(200,.2*e._container.clientHeight),50)&&e.showMore():"bottomUp"==e._config.direction&&e._container.scrollTop<Math.max(Math.min(200,.2*e._container.clientHeight),50)&&e.showMore()},50)).scroll(),"bottomUp"==this._config.direction&&(this._container.scrollTop=this._container.scrollHeight-this._container.clientHeight)}}],[{key:"_createStorage",value:function(e){return e?"net"==e.type?new _.default(e):e:new h.default}},{key:"_jQueryInterface",value:function(t){"object"!==("undefined"==typeof t?"undefined":r(t))&&t?(0,l.default)(this).data("one-more-list")[t]?this.data("one-more-list")[t].apply(this.data("one-more-list"),Array.prototype.slice.call(arguments,1)):console.error('Unable to find method "'+t+'" for jquery.one-more-list'):this.data("one-more-list",new e(this[0],t))}}]),e}();l.default.fn.list=d._jQueryInterface,t.default=d,e.exports=t.default},function(t,o){t.exports=e},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};o.now=Date.now||function(){return(new Date).getTime()},o.debounce=function(e,t,n){var i,r,c,s,l,a=function a(){var u=o.now()-s;u<t&&u>=0?i=setTimeout(a,t-u):(i=null,n||(l=e.apply(c,r),i||(c=r=null)))};return function(){c=this,r=arguments,s=o.now();var u=n&&!i;return i||(i=setTimeout(a,t)),u&&(l=e.apply(c,r),c=r=null),l}},t.default=o,e.exports=t.default},function(e,t){"use strict";function o(){this.prev=function(){return new Promise(function(e,t){t("error.no-more-data")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=this;this.config=Object.assign({url:"",lastId:0,getLastId:function(e){}},e),this.lastId=this.config.lastId,this.noMoreData=!1,this.prev=function(){return t.noMoreData?new Promise(function(e,t){t("error.no-more-data")}):new Promise(function(e,o){c.default.get(t.config.url,{from:t.lastId}).then(function(n){var i=t.getLastId(n);i?e(n):(t.noMoreData=!0,o("error.no-more-data"))},function(){o("error.ajax-failed")})})}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),c=n(r);t.default=i,e.exports=t.default}])});